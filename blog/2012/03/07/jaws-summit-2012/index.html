
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JAWS Summit 2012 の2日目レポート - (」・ω・)」うー!(/・ω・)/にゃー!</title>
  <meta name="author" content="yudoufu">

  
  <meta name="description" content="EC2 HPC向け Nehalemと同等のCPUを割り当てられるものがある。 リージョンとゾーン リージョン 世界で８か所 １か所は米国政府専用 どこでも自由に選んで設置できる アベイラビリティゾーン 同じリージョン内で
同じリージョン内のゾーン同士は専用線で結ばれているので高速 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yudoufu.github.com/blog/2012/03/07/jaws-summit-2012">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="(」・ω・)」うー!(/・ω・)/にゃー!" type="application/atom+xml">
  <script type="text/javascript" src="http://s.hatena.ne.jp/js/HatenaStar.js"></script>
<script type="text/javascript">
    Hatena.Star.Token = '13ddf8d91a044cc49bfdb2322e3dd5cb99fec59c';
    Hatena.Star.SiteConfig = {
        entryNodes: {
            'article': {
                uri: 'h1 a',
                title: 'h1',
                container: 'p.meta'
            }
        }
    };
</script>
<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">(」・ω・)」うー!(/・ω・)/にゃー!</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:yudoufu.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
    <h1 class="entry-title"><a href="">JAWS Summit 2012 の2日目レポート</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-07T12:49:00+09:00" pubdate data-updated="true">Mar 7<span>th</span>, 2012</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h2>EC2</h2>

<h3>HPC向け</h3>

<ul>
<li>Nehalemと同等のCPUを割り当てられるものがある。</li>
</ul>


<h3>リージョンとゾーン</h3>

<ul>
<li><p>リージョン</p>

<ul>
<li>世界で８か所

<ul>
<li>１か所は米国政府専用</li>
</ul>
</li>
<li>どこでも自由に選んで設置できる</li>
</ul>
</li>
<li><p>アベイラビリティゾーン</p>

<ul>
<li>同じリージョン内で</li>
<li>同じリージョン内のゾーン同士は専用線で結ばれているので高速</li>
<li>リージョン間はインターネット</li>
</ul>
</li>
</ul>


<h3>EBS</h3>

<ul>
<li><p>外付けHTDDみたいなもの</p>

<ul>
<li>AZ単位で存在する。</li>
<li>他のインスタンスに付け替え可能</li>
<li>スナップショットをS3にバックアップ可能。そのバックアップから他のAZに作成することもできる。

<ul>
<li>リージョンも移動できるの？</li>
</ul>
</li>
<li>複数のEC2にアタッチすることはできない。</li>
</ul>
</li>
<li><p>インスタンスストレージとは？</p>

<ul>
<li>インスタンスに付属している。別途料金はかからない。</li>
<li>寿命がインスタンス依存</li>
</ul>
</li>
</ul>


<h3>AMI</h3>

<ul>
<li><p>EBS backed AMI</p>

<ul>
<li>EBSにAMIが保存されている。</li>
<li>EC2を停止してもインスタンスデータが残るタイプ。</li>
<li>stopすると停止でき、その間は課金されない。</li>
<li>terminatすると破棄される。</li>
</ul>
</li>
<li><p>S3 backed AMI</p>

<ul>
<li>昔からあるタイプ</li>
<li>停止すると揮発する。</li>
</ul>
</li>
</ul>


<h3>セキュリティモデル</h3>

<ul>
<li>責任分担モデル。

<ul>
<li>物理インスタンス・ファイアウォールはAWS側が責任を持つ</li>
<li>個別のインスタンスにセキュリティグループ、ファイアウォールが設定できる。</li>
</ul>
</li>
</ul>


<h3>TIPS</h3>

<ul>
<li>故障のための設計をしておく</li>
<li>定期的なバックアップ</li>
<li>Private IP 経由の通信を活用すると安く済む</li>
<li>EBSは1Tを選ぶと性能最大化</li>
</ul>


<h2>ELB / AutoScaling / CloudWatch</h2>

<h3>ELB</h3>

<ul>
<li><p>ソフトウェアロードバランサ</p>

<ul>
<li>ELB自体がスケールアウト・スケールアップを自動で行う</li>
<li>異なるAZをまたがって分散可能</li>
<li>ヘルスチェックあり</li>
</ul>
</li>
<li><p>トラフィックに合わせて増減するので、IPアドレスもそれに伴って増減する。IPを指定しちゃだめ。</p>

<ul>
<li>ELBにはDNS名が割り振られるので、それを使うようにすべき。</li>
<li>その名前をさらにCNAMEして使う。</li>
</ul>
</li>
<li><p>WebSocket対応しているの？</p>

<ul>
<li>現状はサポートしていない。</li>
</ul>
</li>
<li><p>CloudWatch との統合</p>

<ul>
<li>各所のヘルスチェックができる。</li>
</ul>
</li>
<li><p>IPv6もサポート</p></li>
<li><p>SSL のサポート</p>

<ul>
<li>ELBでSSLをひもとくことが可能</li>
<li>Cipherも選択できる。</li>
</ul>
</li>
<li><p>セッションアフィニティもサポート</p>

<ul>
<li>ELBがcookieを発行できる。</li>
<li>とはいえ、スケール性を考えると使うのはあんまりお勧めしない。</li>
</ul>
</li>
<li><p>X-Forwarded ヘッダーもサポート</p></li>
<li><p>UDPはサポートしない</p></li>
<li><p>TIPS</p>

<ul>
<li>IPアドレスはダメ絶対</li>
<li>負荷分散は、AZ毎に均等に割り振ろうとする。

<ul>
<li>性能のバランスに偏りがある場合に注意。</li>
</ul>
</li>
<li>各インスタンスのサイズ・性能は考慮されない。</li>
<li>Management Consoleではサポートされていないが、コマンドラインツールでしかサポートされていない機能もあるので注意。</li>
<li>急激な増減がある場合は注意

<ul>
<li>キャパシティ判定は５分ぐらい</li>
<li>予想できるものには、事前に準備を。</li>
</ul>
</li>
<li>DNSのTTLが60秒かかるので、その辺もスケール時に注意</li>
<li>ヘルスチェックのアクセス権に注意。</li>
<li>ELBの負荷テストは要注意。ドキュメントがあるのでそれに従って。

<ul>
<li>60秒でセッションを切る仕様になったりしている。</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>AutoScaling</h3>

<ul>
<li>ELBと組み合わせてよく使う。

<ul>
<li>マニュアル・スケジュール・ポリシーベース(CPUの使用率など) に従ってインスタンスを増減してくれる。</li>
<li>コマンドラインツールから設定する。

<ul>
<li>グループ単位で増減させる対象を指定する。</li>
</ul>
</li>
<li>インスタンスも勝手に落ちたりするので、そうなる事を考慮して設計しておく</li>
<li>20以上のインスタンス使いたい場合は連絡ください。</li>
</ul>
</li>
</ul>


<h3>CloudWatch</h3>

<ul>
<li>いろんなメトリクスをグラフで見れる。</li>
<li>カスタムメトリクス(有料)も作れる。</li>
</ul>


<h2>S3</h2>

<h3>デモ</h3>

<ul>
<li>UpするとURLがつく</li>
<li>CloudFrontを使う使わないでURL変わる。</li>
</ul>


<h3>S3とは</h3>

<ul>
<li>httpsでアクセスするWebのストレージサービス</li>
<li>アクセスコントロールなどもできる。</li>
<li><p>信頼性も高い。</p></li>
<li><p>バケット</p>

<ul>
<li>1アカウント最大100個</li>
</ul>
</li>
<li><p>オブジェクト</p>

<ul>
<li>1オブジェクト5TBまで。</li>
<li>バケットごとの個数制限は無い？</li>
</ul>
</li>
</ul>


<h3>コンセプト</h3>

<ul>
<li><p>堅牢であること</p>

<ul>
<li>2006年サービス以降データロストなし</li>
<li>３か所以上にレプリケーション</li>
<li>イレブンナイン</li>
<li>3つ以上のDCが同時に焼失しない限りは無くならない。</li>
</ul>
</li>
<li><p>常に利用可能なこと</p>

<ul>
<li>99.9%のSLA</li>
<li>計画停止なし</li>
<li>８つのリージョンから選択可能。</li>
</ul>
</li>
<li><p>スケールすること</p>

<ul>
<li>論理的には無限にスケール</li>
<li>1PBになろうが保存可能</li>
<li>１つのフィルサイズは5TBまで。</li>
</ul>
</li>
<li><p>安全であること</p>

<ul>
<li>全てSSL通信</li>
<li>認証・認可機能を持つ

<ul>
<li>ACL/ポリシーベース</li>
<li>ユーザーアクセスコントロール</li>
</ul>
</li>
<li>サーバサイドでの暗号化機能もある。</li>
</ul>
</li>
<li><p>高速であること</p>

<ul>
<li>常に高速なレイテンシ</li>
<li>専用線で直結も可能

<ul>
<li>これ詳しく聞きたいな。どういった形でのサービス提供？</li>
</ul>
</li>
</ul>
</li>
<li><p>シンプルであること</p>

<ul>
<li>PUT/GET/DELETE/LIST のみ</li>
<li>データサイズも数も気にしなくてよい。</li>
<li>様々な言語でのSDKもある。</li>
</ul>
</li>
<li><p>低コストであること</p>

<ul>
<li>6年間で15回値下げしてる！</li>
<li>2012/2にまた13%値下げした。</li>
</ul>
</li>
</ul>


<h3>事例として</h3>

<ul>
<li>Smugmug

<ul>
<li>プロの写真販売用サイト</li>
<li>ペタバイトのデータを保存している。</li>
</ul>
</li>
</ul>


<h3>AWS自体もユーザ</h3>

<ul>
<li><p>AWSサービスの中心にS3がある。</p></li>
<li><p>リージョン間での簡単な移動ソリューションはあるか？</p>

<ul>
<li>インポート/エクスポートという手はある。</li>
<li>一回ローカルに落とす感じ。</li>
</ul>
</li>
<li><p>ディザスタリカバリとして、東京リージョン + 他のリージョンにも保持した方がいいか？</p>

<ul>
<li>そこはむしろ費用との兼ね合い。</li>
<li>日本丸ごと潰れる心配をする感じであれば考えてもいいかも。</li>
</ul>
</li>
<li><p>東京リージョンのレイテンシはどれくらい？</p>

<ul>
<li>公式ではないが、10msecぐらいという感じ。</li>
<li>シンガポールだと70msec程度</li>
</ul>
</li>
</ul>


<h2>CloudFormation</h2>

<p>Amazon Simpleworkflowもおすすめ！</p>

<h3>CloudFormation</h3>

<ul>
<li><p>デプロイと自動化を担当するサービス</p></li>
<li><p>テンプレートを元にして、AWSのEC2 / ELB / S3などを一発で各サービスを構成することができる</p></li>
</ul>


<h3>利用シーンと利点</h3>

<ul>
<li><p>一度テンプレートを作成すれば、同じ構成を再現できる</p>

<ul>
<li>開発環境の構築など</li>
<li>同じアプリでデータが異なるものなど</li>
</ul>
</li>
<li><p>ベストプラクティスが盛り込まれたテンプレートが元から提供されている</p></li>
<li><p>起動パラメータも渡せる</p></li>
</ul>


<h3>利用料金</h3>

<ul>
<li>このサービス自体は無料</li>
</ul>


<h3>スタック</h3>

<ul>
<li>リソースの集合のこと</li>
<li><p>スタックの単位で構築することができる。</p></li>
<li><p>スタックの構築方法</p>

<ul>
<li>マネジメントコンソール</li>
<li>コマンドラインツールやSDKからも可能</li>
</ul>
</li>
</ul>


<h3>テンプレート</h3>

<ul>
<li>サンプルでいろんなものが利用できる</li>
<li>別途、stack作成の際に自分でuploadすることもできる。</li>
<li><p>S3に保存しておくことも可能。</p></li>
<li><p>JSONフォーマット</p>

<ul>
<li>どのサービスもだいたいJSON</li>
<li>JSONの中にプログラミングして行くようなイメージになりそう。</li>
<li>後で変更可能なパラメータなどを定義可能</li>
<li>予約後などもテンプレート内で取れる</li>
<li>１つのテンプレートを複数のリージョンで使いたい場合でも、分類してキーを指定したりできる。</li>
<li>スタック構築後に知りたいアウトプットパラメータとして返す値を定義して行くことも可能。</li>
</ul>
</li>
</ul>


<h3>TIPS</h3>

<ul>
<li>EC2必須ではない

<ul>
<li>DB構築だけ、オートスケールだけ、アラーム設定だけでもOK</li>
</ul>
</li>
<li>参照関係があると、依存関係とみなされる。</li>
</ul>


<h3>CloudFormer</h3>

<ul>
<li><p>テンプレート作るのしんどい</p>

<ul>
<li>ひながたからつくるてもあるが。。。</li>
</ul>
</li>
<li><p>もともと持っているシステム構成を元にテンプレートを生成するリバースエンジニアリングツール</p></li>
<li><p>使い方</p>

<ul>
<li>CloudFormerのテンプレートからスタックを作成。</li>
<li>テンプレート化したりリージョンを選んで、対象にしたいリソースにチェックを入れて生成すればできる。</li>
</ul>
</li>
<li><p>AmazonLinuxには、cloud-init / cfnヘルパー(もしくはchef)などと組み合わせることも可能なので、セットアップも柔軟に可能！</p></li>
</ul>


<h2>CloudFront / Route53</h2>

<h3>CloudFront</h3>

<ul>
<li>世界中に散らばったCDN

<ul>
<li>IPアドレスベースで一番近いところにアクセスする。</li>
</ul>
</li>
<li>コミットメントなし</li>
<li>オリジンにはHTTPでアクセス</li>
<li><p>FLVも可能</p></li>
<li><p>利用メリット</p>

<ul>
<li>EC2向けのネットワーク課金より安い</li>
<li>エッジロケーションごとに価格は異なる</li>
</ul>
</li>
<li>コミットしてもらえれば、ディスカウントもあり。</li>
</ul>


<h3>オリジンの使い分け</h3>

<ul>
<li>EC2を使う場合

<ul>
<li>動的コンテンツ</li>
<li>Ajaxなどのクロスドメイン通信が必要なもの</li>
</ul>
</li>
<li>S3を使う場合

<ul>
<li>静的コンテンツ</li>
<li>FLVなど</li>
</ul>
</li>
</ul>


<h3>ログの保存</h3>

<ul>
<li><p>S3に保存される</p>

<ul>
<li>アクセス記録は全ロケーションから24時間以内に収集</li>
<li>とらないことも可能</li>
</ul>
</li>
<li><p>ログの形式</p>

<ul>
<li>1hもしくは50MBで分割</li>
</ul>
</li>
</ul>


<h3>注意点</h3>

<ul>
<li><p>料金はトラフィックとリクエスト数に依存</p>

<ul>
<li>HTTPSの方がちょっと高い</li>
</ul>
</li>
<li><p>特定のエッジロケーションだけに制限することはできない</p>

<ul>
<li>日本だけ。。。とかは無理</li>
</ul>
</li>
<li><p>エッジロケーションを絞るのも無理。</p></li>
<li><p>今はHTTPSではカスタムドメインが利用できない</p></li>
</ul>


<h3>キャッシュ制御</h3>

<ul>
<li>最小時間は1h

<ul>
<li>廃棄リクエストは可能だが、同時に３リクエストまで

<ul>
<li>1リクエストあたり1000URLまで。</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>動画配信</h3>

<ul>
<li><p>ストリーミング</p>

<ul>
<li>エンドユーザが視聴後にファイルが残らない</li>
<li>部分再生の場合、再生部分のみを配送するので低料金</li>
</ul>
</li>
<li><p>ライブストリーミング</p>

<ul>
<li>FMS on AWSを購入すれば可能</li>
</ul>
</li>
</ul>


<h3>Route53</h3>

<ul>
<li>AnyCastで一番近いロケーションのDNSにつながる</li>
<li>4つの異なるトップドメインにドメインが登録される</li>
</ul>


<h3>とは</h3>

<ul>
<li>SLA 100%のサービス！！</li>
<li>権威DNSサーバ</li>
<li>豊富なレコードタイプ</li>
</ul>


<h3>ホストゾーン</h3>

<ul>
<li><p>ホストゾーン＝ドメインファイル</p>

<ul>
<li>レコードは1000個まで。緩和可能</li>
<li>サブドメインも同一のホストゾーンにできる</li>
</ul>
</li>
<li><p>レコードは荷重ラウンドロビンをサポート</p></li>
</ul>


<h3>独自のエイリアスタイプ</h3>

<ul>
<li>ELBのDNS名をドメインだけの形にして割り当て可能</li>
</ul>


<h3>価格</h3>

<ul>
<li>ホストゾーン + リクエスト数</li>
</ul>


<h3>利用方法</h3>

<ul>
<li>Google SpreadSheetベースで管理・設定することも可能。</li>
</ul>


<h3>FAQ</h3>

<ul>
<li>IPv6対応だが、IPv6で運用しているわけではない。</li>
<li>プライベートIP目的の利用は推奨していない。</li>
<li>反映はものすごく速い。1分もかかることはない</li>
</ul>


<h2>SQS / SNS / Simpleworkflow</h2>

<h3>Simple Queue Service</h3>

<ul>
<li>分散Queueサービス</li>
<li>HTTPSでキューを投げて、受信するだけ</li>
<li>システムを疎結合に分割するためのキーサービス</li>
</ul>


<h3>SQSの機能</h3>

<ul>
<li>最低１度の到達保証</li>
<li>シンプルなAPI

<ul>
<li>HTTPSでやりとりする</li>
</ul>
</li>
<li>プロダクトのインストール不要</li>
</ul>


<h3>分散キューサービス</h3>

<ul>
<li>自動的に複数DC間でレプリケーションされ、メッセージロストを防ぐ</li>
<li>Persisitent Message</li>
</ul>


<h3>使い方</h3>

<ul>
<li>エンドポイントの作成</li>
<li>メッセージの送信</li>
<li>メッセージの受信</li>
<li>のみ</li>
</ul>


<h3>メッセージの到達保証</h3>

<ul>
<li>最低１度は受信する

<ul>
<li>At-Latest-Once delivery</li>
</ul>
</li>
<li>Visibility Timeout

<ul>
<li>Readerがメッセージを受信した場合に、一定期間メッセージが見えなくなる</li>
<li>メッセージは明示的に消さない限り、２週間存在し続ける。</li>
<li>勝手に消すようなコントロールはしない</li>
</ul>
</li>
<li>デメリット

<ul>
<li>稀に複数回届くことがある</li>
<li>消さないと消えない</li>
</ul>
</li>
</ul>


<h3>制約</h3>

<ul>
<li>順序性は保証しない</li>
<li>保存は最大２週間</li>
<li>サイズは64KBまで</li>
<li>キュー内に入るメッセージ数は無制限</li>
<li>キュー名は80文字まで。</li>
</ul>


<h3>いつ使うか？</h3>

<ul>
<li>コンポーネント間の依存を疎結合にする</li>
<li>オンプレミスとのやりとり</li>
</ul>


<h3>Simple Notification Service</h3>

<ul>
<li>通知サービス</li>
<li>CloudWatchとも連携</li>
<li>マルチプロトコル</li>
<li>ショートメッセージも飛ばせる(日本だと微妙)</li>
</ul>


<h3>使い方</h3>

<ul>
<li>トピックの作成</li>
<li>トピックの購読者を登録</li>
<li>通知を送ると、購読者に届く</li>
</ul>


<h3>制約</h3>

<ul>
<li>1アカウントあたり100トピックまで</li>
<li>メッセージは最大8KBまで</li>
</ul>


<h3>Simple Workflow Service</h3>

<ul>
<li>オーケストレーションをするサービス

<ul>
<li>分散処理を管理する</li>
</ul>
</li>
<li>言ってみれば、オーケストラの指揮者のようなもの！</li>
<li>AWSの中だけではなく、オンプレミス / モバイルなどのコンポーネントとの連携することが可能

<ul>
<li>ワークフローだけAmazon側で自動化できる</li>
</ul>
</li>
<li>ワークフローの階層構造も可能</li>
</ul>


<h3>構成</h3>

<ul>
<li>Workflow Starter</li>
<li>Workflow Worker</li>
<li>Decider</li>
</ul>


<h3>Flow Framewrok</h3>

<ul>
<li>Java製。SWFを使うワークフローフレームワーク</li>
<li>DSLを利用する</li>
</ul>


<h2>VPC</h2>

<h3>VPCの利用典型</h3>

<ul>
<li>AWS上にプライベートクラウドを構築</li>
<li>オンプレミスとのハイブリッドを実現</li>
<li>社内インフラの一部に見える

<ul>
<li>ENIというMac/IPをインスタンスごとに付け替えられるようにするサービスも日本で始まった</li>
</ul>
</li>
</ul>


<h3>VPCの機能</h3>

<ul>
<li>VPN</li>
<li>プライベートサブネットとパブリックサブネット</li>
<li>インターネットへのゲートウェイ</li>
</ul>


<h3>EC2 Dedicated Instance</h3>

<ul>
<li>物理サーバを別の人と同居するのは嫌だ、という場合。</li>
<li>VPC内での専用インスタンス

<ul>
<li>シングルテナント保証</li>
</ul>
</li>
<li>クラウドのメリットは保証</li>
</ul>


<h3>パケットの出入り管理</h3>

<ul>
<li>ネットワークレイヤで、INもOUTもコントロールできる</li>
<li>もちろん、インスタンス単位でセキュリティグループでもIN/OUTの両方をコントロールできる。</li>
</ul>


<h3>Amazon VPCをどう考えるか</h3>

<ul>
<li>これから標準になるもの</li>
<li>ネットワークを仮想化するもの</li>
<li>ネットワークのに関する要望にこたえたもの

<ul>
<li>IPアドレス/Macの固定</li>
<li>サブネットを使った管理</li>
</ul>
</li>
</ul>


<h3>使い方</h3>

<ul>
<li>リージョンを選択</li>
<li>IPブロックを設定する

<ul>
<li>最大16ビット</li>
<li>節約する必要はないよｗ</li>
</ul>
</li>
</ul>


<h3>Public Subnetの作成</h3>

<ul>
<li><p>VPC内にIPブロックをセ艇する</p>

<ul>
<li>最大で17ビットマスク</li>
<li>サブネット内の4IPはAWS予約</li>
<li>サブネットはAZをまたぐことはできない。</li>
<li>ELBもこのサブネット内に置かれる。</li>
</ul>
</li>
<li><p>デフォルトでは、サブネット内での通信のみ</p>

<ul>
<li>内部でのACLはフルオープン</li>
</ul>
</li>
<li><p>Internet Gateway の追加</p>

<ul>
<li>Elastic IPつけられる。</li>
<li>In / Out のフィルタ設定が可能。S3にだけアクセスさせる、とかも可能。</li>
</ul>
</li>
<li><p>セキュリティグループ</p>

<ul>
<li>EC2で扱っているセキュリティグループとは別のもの。</li>
<li>稼働中にインスタンスとグループを切り替え可能</li>
</ul>
</li>
</ul>


<h3>VPC とEC2のインスタンスの違い</h3>

<ul>
<li>Dedicated Instance</li>
<li>t1.microは利用できない</li>
<li>VPC/subnetを選べる</li>
</ul>


<h3>Private Subnet</h3>

<ul>
<li>NATインスタンスを付与することで可能</li>
</ul>


<h3>NATインスタンスとは</h3>

<ul>
<li><p>プライベートサブネットから、インターネット接続するためのNAT</p>

<ul>
<li>実態は、AmazonLinux</li>
</ul>
</li>
<li><p>普通のインスタンスの起動と同じように起動することができる。</p></li>
<li>EIPによってpublicなIPをつける必要がある。</li>
</ul>


<h3>VPNでつなぐ</h3>

<ul>
<li>ハードウェアVPNを対象</li>
<li>詳細には、BGPが喋れてIPsec AES 128bitが使えればOK</li>
</ul>


<h3>制限</h3>

<ul>
<li>1つのVPNゲートウェイあたり10までの接続</li>
</ul>


<h3>そのた</h3>

<ul>
<li><p>DHCPオプションの活用</p></li>
<li><p>マルチホーム(cloudhub)</p>

<ul>
<li>拠点通信も行える</li>
</ul>
</li>
<li><p>VPCでは特別なお金は頂いてません</p>

<ul>
<li>VPNの接続設定にはちょっと費用かかるけどそれぐらい。</li>
</ul>
</li>
<li><p>EC2にあるEBSはVPCに持っていくことはできるが、逆はできない。</p></li>
</ul>


<h2>Storage Gataway / Direct Connect</h2>

<h3>データを移行するような場合</h3>

<ul>
<li>S3に持っていくような場合には、Internet経由しかなかった</li>
<li>次にAWS Import / Exprot サービス</li>
<li>Storage Gataway

<ul>
<li>既存のデータセンタのデータをクラウドストレージに安全に統合するサービス</li>
<li>インターネット経由でアクセスするサービス</li>
</ul>
</li>
<li>AWS Direct Connect (10G / 1G)

<ul>
<li>直接専用線を引くサービス</li>
<li>高スループット + 低レイテンシ</li>
</ul>
</li>
</ul>


<h3>Storage Gataway</h3>

<ul>
<li><p>仮想アプライアンス</p>

<ul>
<li>VMWare ESXi 4.01 の仮想サーバ</li>
<li>どこかに置くと、iSCSI対応のストレージとして見れる。</li>
<li>そ子におかれたデータが、スケジューリングされてS3に保存される。</li>
</ul>
</li>
<li><p>バックアップデータの保存形式はEBSスナップショット</p>

<ul>
<li>そのため、AWSクラウド上でシステムリカバリも可能</li>
</ul>
</li>
<li><p>定期的にスナップショットバックアップをS3上に保存してくれる、という感じ？</p></li>
</ul>


<h3>ユースケース</h3>

<ul>
<li>バックアップ</li>
<li>ディザスタリカバリとBCP</li>
</ul>


<h3>詳細</h3>

<ul>
<li>1ボリューム最大1TiB</li>
<li>1ゲートウェイで最大12TiB</li>
<li>上限申請も緩和可能</li>
<li>スナップショットの作成スケジュールを1,2,4&#8230;12時間などで設定可能</li>
</ul>


<h3>Direct Connect</h3>

<ul>
<li><p>AWS Direct Connectの物理接続</p>

<ul>
<li>相互接続ポイントを公開している</li>
<li>ポイントにサーバがあるわけではない。</li>
</ul>
</li>
<li><p>通常の専用線引き込みと違い、サーバの設置場所指定に依存しなくてすむ。</p></li>
<li><p>EC2/S3などとの接続</p>

<ul>
<li>Public ASを使ったBGP接続を行う。</li>
</ul>
</li>
<li>VPCなどはVLAN</li>
</ul>


<h3>注意</h3>

<ul>
<li>Public IP transitは行わない</li>
<li>リージョン毎の独立した契約</li>
</ul>


<h3>できること</h3>

<ul>
<li>オンプレミスとのハイブリッド環境の構築</li>
<li>広域LANサービスの一部として使うことなども考えられる。</li>
</ul>


<h3>Direct Conect 接続のために</h3>

<ul>
<li>AWS Direct Connect Solution Provider</li>
<li>諸々の手続きを肩代わりしてくれる。</li>
</ul>


<h3>物理接続</h3>

<ul>
<li>1Gbps or 10Gbpsの接続口を提供</li>
<li>アベイラビリティゾーンとは独立</li>
<li>Equinixへラックを設置する必要がある</li>
<li>終端装置を置くのが、ラック単位で契約。。。

<ul>
<li>Solution Providerに任せれば解決はしてくれる。</li>
</ul>
</li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">yudoufu</span></span>

      








  


<time datetime="2012-03-07T12:49:00+09:00" pubdate data-updated="true">Mar 7<span>th</span>, 2012</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://yudoufu.github.com/blog/2012/03/07/jaws-summit-2012/" data-via="yudoufu" data-counturl="http://yudoufu.github.com/blog/2012/03/07/jaws-summit-2012/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/01/07/nginx-nagios-debian/" title="Previous Post: nginx + nagios at Debianの設置">&laquo; nginx + nagios at Debianの設置</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/04/22/mysql-casual/" title="Next Post: mysql casual talks vol.3にいってきた。">mysql casual talks vol.3にいってきた。 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>

  <p><a href="http://twitter.com/yudoufu">@yudoufu</a>です。</p>

  <p>渋谷辺りでOperation Enginnerしてます。元PHPer。Objective-Cとかもやってました。</p>
</section>
<section>
  <h1><a href="/blog/archives">Recent Posts</a></h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/04/02/jobchange/">株式会社ミクシィを退職し、株式会社クロコスに入社しました。</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/22/qpstudy-2012-05/">qpstudy 2012.05 に参加してきた</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/13/gitlab-jenkins-combination/">GitLabのリポジトリをJenkinsと連動させる</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/28/libvirt-version/">KVMでlibvirt( < 0.8.2) を使って管理をしている場合の、マイグレーション時の注意</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/28/vm-mount-memo/">VM disk image の mount 方法いくつかメモ</a>
      </li>
    
  </ul>
</section>


<section>
  <h1><a href="http://twitter.com/yudoufu">Latest Tweets</a></h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("yudoufu", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/yudoufu" class="twitter-follow-button" data-show-count="false">Follow @yudoufu</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - yudoufu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'yudoufu';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://yudoufu.github.com/blog/2012/03/07/jaws-summit-2012/';
        var disqus_url = 'http://yudoufu.github.com/blog/2012/03/07/jaws-summit-2012/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
